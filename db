CREATE TABLE IF NOT EXISTS Users(
'email' VARCHAR(255) NOT NULL,
'username' VARCHAR(50) NOT NULL,
'password' VARCHAR(255) NOT NULL,
'firstname' VARCHAR(255) NOT NULL,
'lastname' VARCHAR(255) NOT NULL,
'gender_id' INT(20),
'city_id' INT(20),
'profile_picture_url' VARCHAR(255),
'birth_date' DATE,
'date_created' DATE NOT NULL,
'date_updated' DATE,
'active' TINYINT(1) NOT NULL DEFAULT ,
'activation_key' VARCHAR(255) NOT NULL,
'last_login' DATE DEFAULT NULL,
PRIMARY KEY ('email'),
UNIQUE(\`username\`),
FOREIGN KEY ('gender_id') REFERENCES Genders('gender_id')
FOREIGN KEY ('city_id') REFERENCES Cities('city_id')
)

CREATE TABLE Messages(
'message_id' INT(20) NOT NULL AUTO_INCREMENT,
'user_id_from' INT(20) NOT NULL,
'user_id_to' INT(20) NOT NULL,
'content' text NOT NULL,
'date_created' date NOT NULL,
PRIMARY KEY ('message_id'),
FOREIGN KEY ('user_id_from') REFERENCES Users('user_id'),
FOREIGN KEY ('user_id_to') REFERENCES Users('user_id')
);

CREATE TABLE Likes(
'user_id' INT(20) NOT NULL AUTO_INCREMENT,
'liked_user_id' int(20) NOT NULL,
'date_created' DATE NOT NULL,
PRIMARY KEY ('user_id', 'liked_user_id'),
UNIQUE INDEX ('post_id', 'user_id'),
FOREIGN KEY ('liked_user_id') REFERENCES User('email'),
FOREIGN KEY ('user_id') REFERENCES User('email')
);

CREATE TABLE Genders (
'gender_id' INT(20) NOT NULL AUTO_INCREMENT,
'name' VARCHAR(100) NOT NULL,
PRIMARY KEY ('gender_id'),
UNIQUE KEY ('name')
);

CREATE TABLE Countries (
'country_id' INT(20) NOT NULL AUTO_INCREMENT,
'name' VARCHAR(100) NOT NULL,
PRIMARY KEY ('country_id'),
UNIQUE KEY ('name')
);

CREATE TABLE States (
'state_id' INT(20) NOT NULL AUTO_INCREMENT,
'name' VARCHAR(100) NOT NULL,
'country_id' INT(20) NOT NULL,
PRIMARY KEY ('state_id'),
UNIQUE KEY ('name','country_id')
);

CREATE TABLE Cities (
'city_id' INT(20) NOT NULL AUTO_INCREMENT,
'name' VARCHAR(100) NOT NULL,
'state_id' INT(20) NOT NULL,
PRIMARY KEY ('city_id'),
UNIQUE KEY ('name','state_id')
)

